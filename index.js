// 创建按钮
const createBtn = () => {
  const backToTopBtn = document.createElement('div');
  backToTopBtn.setAttribute('id', 'back-to-top');
  backToTopBtn.innerHTML = `
  <svg t="1566714528053" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="9378" width="50" height="50"><path d="M512 502.5302368m-461.042896 0a461.042896 461.042896 0 1 0 922.085792 0 461.042896 461.042896 0 1 0-922.085792 0Z" fill="#FF8A3B" p-id="9379"></path><path d="M286.18307093 390.03086187c2.45453227 0 4.90906347-0.40908907 6.95450667-2.0454432l220.9078656-125.99930133 217.2260672 125.59021226c6.95450667 4.0908864 15.13627947 1.63635413 19.22716587-5.31815253 4.0908864-6.95450667 1.63635413-15.13627947-5.31815147-19.22716587l-224.18057493-129.68109866c-4.49997547-2.45453227-9.81812693-2.45453227-13.90901334 0l-227.86237226 130.09018773c-6.95450667 4.0908864-9.40903893 12.2726592-5.31815254 19.22716587 2.86362027 4.49997547 7.77268373 7.36359573 12.2726592 7.36359573zM249.36509333 548.75725334h55.2269664v175.49902613h40.09068694v-175.49902613H399.500624v-32.31800214H249.36509333zM496.45463147 513.16654187c-26.99985067 0-48.27245973 10.227216-64.63600427 30.681648s-24.5453184 45.40883947-24.5453184 76.0904864c0 30.681648 7.77268373 55.6360544 22.9089632 76.90866453 15.13627947 20.86352107 36.8179776 31.09073707 64.22691627 31.09073707 26.99985067 0 48.68154773-10.227216 64.63600533-29.86347093 15.95445653-19.63625493 24.5453184-45.40883947 24.5453184-77.31775254 0-30.681648-7.77268373-55.6360544-23.31805227-76.49957546-15.54536853-20.86352107-36.8179776-31.09073707-63.81782826-31.09073707z m32.3180032 167.31725333c-9.40903893 11.04539307-20.86352107 16.77263467-33.95435734 16.77263467-15.13627947 0-26.99985067-6.54541867-34.7725344-19.22716693-8.1817728-12.68174827-11.86357013-31.90891413-11.86357013-56.86332054 0-51.54516907 15.95445653-77.31775253 48.27245867-77.31775253 15.95445653 0 28.22711573 6.95450667 35.59071146 20.454432 7.77268373 13.49992533 11.45448213 32.31800213 11.45448214 55.6360544-0.40908907 29.04529387-5.31815253 49.0906368-14.7271904 60.54511893zM757.453184 534.84824c-11.45448213-11.86357013-29.86347093-18.4089888-53.99970133-18.4089888h-85.09043627v207.81702827h37.2270656v-82.226816h51.95425707c19.22716587 0 35.18162347-6.1363296 48.27245973-17.59081173 12.68174827-11.45448213 18.81807787-26.99985067 18.81807787-46.22701654 0-16.77263467-5.72724053-31.09073707-17.18172267-43.3633952z m-31.09073707 66.27235947c-6.1363296 5.72724053-14.72719147 8.59086187-26.5907616 8.5908608h-44.18157333v-62.18147307h40.908864c14.72719147 0 24.95440747 3.27270933 30.681648 9.40903894 5.72724053 6.1363296 8.59086187 13.09083627 8.59086187 21.68169813 0 9.40903893-3.27270933 17.18172267-9.40903894 22.4998752z" fill="#FFFFFF" p-id="9380"></path></svg>
  <div id='close-btn'>
    <svg t="1566714657112" viewBox="0 0 1038 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="12560" width="20" height="20"><path d="M509.125332 997.359791C236.342166 997.359791 14.419101 775.403955 14.419101 502.620789 14.419101 229.804853 236.342166 7.849017 509.125332 7.849017s494.739002 221.955836 494.739002 494.771772c0 272.783166-221.955836 494.739002-494.739002 494.739002zM726.85375 321.923243l-36.998101-36.965331-180.697547 180.664776-180.697546-180.664776-36.998101 36.965331 180.697546 180.697546-180.697546 180.664776 36.998101 36.998101 180.697546-180.697546 180.697547 180.697546 36.998101-36.998101-180.697546-180.664776 180.697546-180.697546z" fill="#B3B3B3" p-id="12561"></path></svg>
  </div>
  `
  backToTopBtn.addEventListener('click', onClick);
 

  return backToTopBtn;

  
}
// 点击事件
const onClick = () => {
  (function smoothscroll(){
    var currentScroll = document.documentElement.scrollTop || document.body.scrollTop;
    if (currentScroll > 0) {
         window.requestAnimationFrame(smoothscroll);
         window.scrollTo (0,currentScroll - (currentScroll/5));
    }
  })();
}

// 关闭按钮
const onClose = (e) => {
  e.stopPropagation();
  var backToTopBtn = document.querySelector('#back-to-top');
  backToTopBtn.style.display = 'none';
  window.onscroll = null
  return
}


// 把按钮插入文档
const injectBtn = () => {
  var body = document.querySelector('body');
  body.appendChild(createBtn());
  displayHandler();
  var closeBtn = document.querySelector('#close-btn');
  closeBtn.addEventListener('click', onClose);
};

// 监听滚动，大于50px才显示按钮
window.onscroll = function(e) {
  displayHandler()
}

// 控制按钮显示/隐藏
const displayHandler = () => {
  var currentScroll=document.documentElement.scrollTop||document.body.scrollTop;
  var backToTopBtn = document.querySelector('#back-to-top');
  if (!backToTopBtn) return
  if (currentScroll >50) {
    backToTopBtn.style.display = 'block';
  } else {
    backToTopBtn.style.display = 'none';
  }
}

injectBtn();
